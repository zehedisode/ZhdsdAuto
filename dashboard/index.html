<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZhdsdAuto</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="dashboard.css">
    <link rel="stylesheet" href="styles/sidebar.css">
    <link rel="stylesheet" href="styles/panels.css">
    <link rel="stylesheet" href="styles/modal.css">
    <link rel="stylesheet" href="styles/context-menu.css">
    <link rel="icon" href="../icons/icon48.png">
</head>

<body>
    <div class="app">
        <!-- ===== Sidebar ===== -->
        <aside class="sidebar">
            <div class="sidebar-brand">
                <img src="../icons/icon48.png" alt="ZhdsdAuto" class="sidebar-logo">
                <div>
                    <h1 class="sidebar-title">ZhdsdAuto</h1>
                    <span class="sidebar-subtitle">Version 1.1</span>
                </div>
            </div>

            <nav class="sidebar-nav">
                <button class="nav-item active" data-view="flows">
                    <span class="nav-icon">ğŸ“‹</span>
                    <span>AkÄ±ÅŸlarÄ±m</span>
                </button>
                <button class="nav-item" data-view="builder">
                    <span class="nav-icon">ğŸ› ï¸</span>
                    <span>AkÄ±ÅŸ OluÅŸtur</span>
                </button>
                <button class="nav-item" data-view="templates">
                    <span class="nav-icon">ğŸ“¦</span>
                    <span>Åablonlar</span>
                </button>
                <button class="nav-item" data-view="buttons">
                    <span class="nav-icon">ğŸ”˜</span>
                    <span>Butonlar</span>
                </button>
                <button class="nav-item" data-view="backup">
                    <span class="nav-icon">ï¿½</span>
                    <span>Yedekleme</span>
                </button>
            </nav>

            <div class="sidebar-footer">
                <div class="status-indicator" id="globalStatus">
                    <span class="status-dot idle"></span>
                    <span>HazÄ±r</span>
                </div>
                <div class="sidebar-version">v1.1</div>
            </div>
        </aside>

        <!-- ===== Main Content ===== -->
        <main class="main-content">

            <!-- ===== Flows List View ===== -->
            <div class="view active" id="flowsView">
                <div class="view-header">
                    <div>
                        <h2 class="view-title">AkÄ±ÅŸlarÄ±m</h2>
                        <p class="view-desc">KayÄ±tlÄ± otomasyon akÄ±ÅŸlarÄ±nÄ±z</p>
                    </div>
                    <button class="btn btn-primary" id="createFlowBtn">
                        <span>ï¼‹</span> Yeni AkÄ±ÅŸ OluÅŸtur
                    </button>
                </div>

                <div class="flows-grid" id="flowsGrid">
                    <!-- Flows rendered here -->
                </div>

                <div class="empty-state" id="emptyState">
                    <div class="empty-illustration">ğŸ¤–</div>
                    <h3>HenÃ¼z AkÄ±ÅŸ Yok</h3>
                    <p>Yeni akÄ±ÅŸ oluÅŸturarak tarayÄ±cÄ± otomasyonuna baÅŸlayÄ±n!</p>
                    <button class="btn btn-primary btn-lg" id="emptyCreateBtn">
                        <span>ï¼‹</span> Ä°lk AkÄ±ÅŸÄ±mÄ± OluÅŸtur
                    </button>
                </div>
            </div>

            <!-- ===== Flow Builder View ===== -->
            <div class="view" id="builderView">
                <div class="view-header">
                    <div class="builder-header-left">
                        <button class="btn btn-ghost" id="backToFlows">â† Geri</button>
                        <input type="text" class="flow-name-input" id="flowNameInput" placeholder="AkÄ±ÅŸ adÄ±nÄ± yazÄ±n...">
                    </div>
                    <div class="builder-header-right">
                        <button class="btn btn-outline" id="toggleConsoleBtn">ğŸ–¥ï¸ Konsol</button>
                        <button class="btn btn-outline" id="saveFlowBtn">ğŸ’¾ Kaydet</button>
                        <button class="btn btn-success" id="runFlowBtn">â–¶ Ã‡alÄ±ÅŸtÄ±r</button>
                    </div>
                </div>

                <div class="builder-layout">
                    <!-- Block Palette (Left) -->
                    <div class="block-palette">
                        <h3 class="palette-title">Bloklar</h3>

                        <div class="palette-category">
                            <h4 class="category-label">ğŸ–±ï¸ EtkileÅŸim</h4>
                            <div class="palette-blocks" id="interactionBlocks"></div>
                        </div>

                        <div class="palette-category">
                            <h4 class="category-label">ğŸŒ Sayfa</h4>
                            <div class="palette-blocks" id="pageBlocks"></div>
                        </div>

                        <div class="palette-category">
                            <h4 class="category-label">ğŸ“„ Veri</h4>
                            <div class="palette-blocks" id="dataBlocks"></div>
                        </div>

                        <div class="palette-category">
                            <h4 class="category-label">ğŸ”€ MantÄ±k</h4>
                            <div class="palette-blocks" id="logicBlocks"></div>
                        </div>
                    </div>

                    <!-- Flow Canvas (Center) -->
                    <div class="flow-canvas">
                        <div class="canvas-content" id="canvasContent">
                            <div class="canvas-empty" id="canvasEmpty">
                                <div class="canvas-empty-icon">â¬…</div>
                                <p>Soldaki blok paletinden blok ekleyerek akÄ±ÅŸÄ±nÄ±zÄ± oluÅŸturun</p>
                            </div>
                            <div class="blocks-list" id="blocksList"></div>
                        </div>

                        <!-- Live Execution Console -->
                        <div class="exec-console hidden" id="execConsole">
                            <div class="exec-console-header">
                                <span class="exec-console-title">ğŸ–¥ï¸ Ã‡alÄ±ÅŸma Konsolu</span>
                                <div class="exec-console-actions">
                                    <button class="btn-sm-icon" id="clearConsoleBtn" title="Temizle">ğŸ—‘ï¸</button>
                                    <button class="btn-sm-icon" id="closeConsoleBtn" title="Kapat">Ã—</button>
                                </div>
                            </div>
                            <div class="exec-console-body" id="execConsoleBody">
                                <div class="exec-line info">AkÄ±ÅŸÄ± Ã§alÄ±ÅŸtÄ±rmak iÃ§in â–¶ Ã‡alÄ±ÅŸtÄ±r butonuna tÄ±klayÄ±n</div>
                            </div>
                        </div>
                    </div>

                    <!-- Block Config (Right) - shown when a block is selected -->
                    <div class="block-config hidden" id="blockConfig">
                        <div class="config-header">
                            <h3 id="configTitle">Blok AyarlarÄ±</h3>
                            <button class="btn-close" id="closeConfig">Ã—</button>
                        </div>
                        <div class="config-body" id="configBody"></div>
                    </div>
                </div>
            </div>

            <!-- ===== Templates View ===== -->
            <div class="view" id="templatesView">
                <div class="view-header">
                    <div>
                        <h2 class="view-title">Åablonlar</h2>
                        <p class="view-desc">HazÄ±r otomasyon ÅŸablonlarÄ± â€” tek tÄ±kla kullanÄ±n</p>
                    </div>
                </div>
                <div class="templates-grid" id="templatesGrid"></div>
            </div>

            <!-- ===== Buttons View ===== -->
            <div class="view" id="buttonsView">
                <div class="view-header">
                    <div>
                        <h2 class="view-title">Sayfa ButonlarÄ±</h2>
                        <p class="view-desc">Web sitelerine akÄ±ÅŸ baÅŸlatÄ±cÄ± butonlar ekleyin</p>
                    </div>
                    <button class="btn btn-primary" id="createButtonBtn">
                        <span>ï¼‹</span> Yeni Buton
                    </button>
                </div>

                <div class="buttons-grid" id="buttonsGrid">
                    <!-- Buttons list active here -->
                </div>

                <div class="empty-state" id="buttonsEmptyState">
                    <div class="empty-illustration">ğŸ”˜</div>
                    <h3>HenÃ¼z Buton Yok</h3>
                    <p>SÄ±k kullandÄ±ÄŸÄ±nÄ±z akÄ±ÅŸlar iÃ§in sayfa iÃ§i butonlar oluÅŸturun.</p>
                </div>
            </div>

            <!-- ===== Backup & Restore View ===== -->
            <div class="view" id="backupView">
                <div class="view-header">
                    <div>
                        <h2 class="view-title">Yedekleme & Geri YÃ¼kleme</h2>
                        <p class="view-desc">Ä°ÅŸ akÄ±ÅŸlarÄ±nÄ±zÄ± yedekleyin veya geri yÃ¼kleyin</p>
                    </div>
                </div>

                <div class="backup-container">
                    <div class="backup-card">
                        <div class="backup-icon">ğŸ“¥</div>
                        <h3>Yedek Al (Backup)</h3>
                        <p>TÃ¼m iÅŸ akÄ±ÅŸlarÄ±nÄ±zÄ± JSON formatÄ±nda bilgisayarÄ±nÄ±za indirin.</p>
                        <button class="btn btn-primary" id="downloadBackupBtn">
                            <span>â¬‡ï¸</span> Yedek Ä°ndir
                        </button>
                    </div>

                    <div class="backup-card">
                        <div class="backup-icon">ğŸ“¤</div>
                        <h3>Geri YÃ¼kle (Restore)</h3>
                        <p>Daha Ã¶nce aldÄ±ÄŸÄ±nÄ±z yedek dosyasÄ±nÄ± yÃ¼kleyerek akÄ±ÅŸlarÄ±nÄ±zÄ± geri getirin.</p>
                        <p class="warning-text">âš ï¸ Bu iÅŸlem mevcut akÄ±ÅŸlarÄ±nÄ±zÄ±n Ã¼zerine yazacaktÄ±r!</p>
                        <input type="file" id="restoreFileInput" accept=".json" style="display: none;">
                        <button class="btn btn-outline" id="restoreBtn">
                            <span>â¬†ï¸</span> Dosya SeÃ§ ve YÃ¼kle
                        </button>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <!-- Status Banner (floating) -->
    <div class="status-banner hidden" id="statusBanner">
        <div class="status-banner-icon" id="bannerIcon">âš¡</div>
        <div class="status-banner-content">
            <div class="status-banner-message" id="bannerMessage">AkÄ±ÅŸ Ã§alÄ±ÅŸÄ±yor...</div>
            <div class="status-banner-progress">
                <div class="progress-bar" id="progressBar"></div>
            </div>
        </div>
        <button class="status-banner-stop" id="stopBtn" title="Durdur">â– </button>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <!-- Button Modal: dashboard/modules/button-modal.js tarafÄ±ndan enjekte edilir -->

    <script type="module" src="dashboard.js"></script>
</body>

</html>